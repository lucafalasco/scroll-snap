!function(Q,U){"object"==typeof exports&&"object"==typeof module?module.exports=U():"function"==typeof define&&define.amd?define([],U):"object"==typeof exports?exports["scroll-snap"]=U():Q["scroll-snap"]=U()}(window,(function(){return function(Q){var U={};function F(B){if(U[B])return U[B].exports;var n=U[B]={i:B,l:!1,exports:{}};return Q[B].call(n.exports,n,n.exports,F),n.l=!0,n.exports}return F.m=Q,F.c=U,F.d=function(Q,U,B){F.o(Q,U)||Object.defineProperty(Q,U,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,U){if(1&U&&(Q=F(Q)),8&U)return Q;if(4&U&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&U&&"string"!=typeof Q)for(var n in Q)F.d(B,n,function(U){return Q[U]}.bind(null,n));return B},F.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(U,"a",U),U},F.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)},F.p="",F(F.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = __importDefault(__webpack_require__(1));\nfunction callback() {\n    console.log('snap');\n}\nvar containerVertical = document.getElementById('container');\nvar snapVertical = new index_1.default(containerVertical, {\n    snapDestinationY: '90%',\n    timeout: 100,\n    duration: 300,\n    easing: function (t) { return (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t); },\n}).bind(callback);\nvar containerHorizontal = document.getElementById('container-horizontal');\nvar snapHorizontal = new index_1.default(containerHorizontal, {\n    snapDestinationX: '90%',\n    timeout: 100,\n    duration: 300,\n    easing: function (t) { return (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t); },\n}).bind(callback);\nwindow.unbind = function () {\n    snapVertical.unbind();\n    snapHorizontal.unbind();\n};\nwindow.bind = function () {\n    snapVertical.bind(callback);\n    snapHorizontal.bind(callback);\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGwtc25hcC8uL2RlbW8vc3JjL2luZGV4LnRzP2I4ZGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxzREFBd0M7QUFFeEMsU0FBUyxRQUFRO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDckIsQ0FBQztBQUVELElBQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUM7QUFDOUQsSUFBTSxZQUFZLEdBQUcsSUFBSSxlQUFVLENBQUMsaUJBQWlCLEVBQUU7SUFDckQsZ0JBQWdCLEVBQUUsS0FBSztJQUN2QixPQUFPLEVBQUUsR0FBRztJQUNaLFFBQVEsRUFBRSxHQUFHO0lBQ2IsTUFBTSxFQUFFLFdBQUMsSUFBSSxRQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQTVDLENBQTRDO0NBQzFELENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBRWpCLElBQU0sbUJBQW1CLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQztBQUMzRSxJQUFNLGNBQWMsR0FBRyxJQUFJLGVBQVUsQ0FBQyxtQkFBbUIsRUFBRTtJQUN6RCxnQkFBZ0IsRUFBRSxLQUFLO0lBQ3ZCLE9BQU8sRUFBRSxHQUFHO0lBQ1osUUFBUSxFQUFFLEdBQUc7SUFDYixNQUFNLEVBQUUsV0FBQyxJQUFJLFFBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBNUMsQ0FBNEM7Q0FDMUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FDaEI7QUFBQyxNQUFjLENBQUMsTUFBTSxHQUFHO0lBQ3hCLFlBQVksQ0FBQyxNQUFNLEVBQUU7SUFDckIsY0FBYyxDQUFDLE1BQU0sRUFBRTtBQUN6QixDQUFDLENBQ0E7QUFBQyxNQUFjLENBQUMsSUFBSSxHQUFHO0lBQ3RCLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQzNCLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQy9CLENBQUMiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTY3JvbGxTbmFwIGZyb20gJy4uLy4uL3NyYy9pbmRleCdcblxuZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gIGNvbnNvbGUubG9nKCdzbmFwJylcbn1cblxuY29uc3QgY29udGFpbmVyVmVydGljYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbmNvbnN0IHNuYXBWZXJ0aWNhbCA9IG5ldyBTY3JvbGxTbmFwKGNvbnRhaW5lclZlcnRpY2FsLCB7XG4gIHNuYXBEZXN0aW5hdGlvblk6ICc5MCUnLFxuICB0aW1lb3V0OiAxMDAsXG4gIGR1cmF0aW9uOiAzMDAsXG4gIGVhc2luZzogdCA9PiAodCA8IDAuNSA/IDIgKiB0ICogdCA6IC0xICsgKDQgLSAyICogdCkgKiB0KSxcbn0pLmJpbmQoY2FsbGJhY2spXG5cbmNvbnN0IGNvbnRhaW5lckhvcml6b250YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyLWhvcml6b250YWwnKVxuY29uc3Qgc25hcEhvcml6b250YWwgPSBuZXcgU2Nyb2xsU25hcChjb250YWluZXJIb3Jpem9udGFsLCB7XG4gIHNuYXBEZXN0aW5hdGlvblg6ICc5MCUnLFxuICB0aW1lb3V0OiAxMDAsXG4gIGR1cmF0aW9uOiAzMDAsXG4gIGVhc2luZzogdCA9PiAodCA8IDAuNSA/IDIgKiB0ICogdCA6IC0xICsgKDQgLSAyICogdCkgKiB0KSxcbn0pLmJpbmQoY2FsbGJhY2spXG47KHdpbmRvdyBhcyBhbnkpLnVuYmluZCA9ICgpID0+IHtcbiAgc25hcFZlcnRpY2FsLnVuYmluZCgpXG4gIHNuYXBIb3Jpem9udGFsLnVuYmluZCgpXG59XG47KHdpbmRvdyBhcyBhbnkpLmJpbmQgPSAoKSA9PiB7XG4gIHNuYXBWZXJ0aWNhbC5iaW5kKGNhbGxiYWNrKVxuICBzbmFwSG9yaXpvbnRhbC5iaW5kKGNhbGxiYWNrKVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\nvar TIMEOUT_DEFAULT = 100;\nvar DURATION_DEFAULT = 300;\nvar EASING_DEFAULT = easeInOutQuad;\nvar NOOP = function () { };\nvar ScrollSnap = /** @class */ (function () {\n    function ScrollSnap(element, config) {\n        var _this = this;\n        this.animating = false;\n        this.lastScrollValue = {\n            x: 0,\n            y: 0,\n        };\n        this.startAnimation = function () {\n            _this.speedDeltaX = _this.checkScrollSpeed(_this.target.scrollLeft, 'x');\n            _this.speedDeltaY = _this.checkScrollSpeed(_this.target.scrollTop, 'y');\n            if (_this.animating || (_this.speedDeltaX === 0 && _this.speedDeltaY === 0)) {\n                return;\n            }\n            _this.handler(_this.target);\n        };\n        this.animationHandler = function () {\n            // if we don't move a thing, we can ignore the timeout: if we did, there'd be another timeout added for this.scrollStart+1.\n            if (_this.scrollStart.y === _this.target.scrollTop &&\n                _this.scrollStart.x === _this.target.scrollLeft) {\n                // ignore timeout\n                return;\n            }\n            // detect direction of scroll. negative is up, positive is down.\n            var direction = {\n                y: _this.speedDeltaY > 0 ? 1 : -1,\n                x: _this.speedDeltaX > 0 ? 1 : -1,\n            };\n            // get the next snap-point to snap-to\n            var snapPoint = _this.getNextSnapPoint(_this.target, direction);\n            _this.listenerElement.removeEventListener('scroll', _this.startAnimation, false);\n            _this.animating = true;\n            // smoothly move to the snap point\n            _this.smoothScroll(_this.target, snapPoint, function () {\n                // after moving to the snap point, rebind the scroll event handler\n                _this.animating = false;\n                _this.listenerElement.addEventListener('scroll', _this.startAnimation, false);\n                _this.onAnimationEnd();\n            });\n            // we just jumped to the snapPoint, so this will be our next this.scrollStart\n            if (!isNaN(snapPoint.x) || !isNaN(snapPoint.y)) {\n                _this.scrollStart = snapPoint;\n            }\n        };\n        this.element = element;\n        if (config.timeout && (isNaN(config.timeout) || typeof config.timeout === 'boolean')) {\n            throw new Error(\"Optional config property 'timeout' is not valid, expected NUMBER but found \" + (typeof config.timeout).toUpperCase());\n        }\n        this.timeout = config.timeout || TIMEOUT_DEFAULT;\n        if (config.duration && (isNaN(config.duration) || typeof config.duration === 'boolean')) {\n            throw new Error(\"Optional config property 'duration' is not valid, expected NUMBER but found \" + (typeof config.duration).toUpperCase());\n        }\n        this.duration = config.duration || DURATION_DEFAULT;\n        if (config.easing && typeof config.easing !== 'function') {\n            throw new Error(\"Optional config property 'easing' is not valid, expected FUNCTION but found \" + (typeof config.easing).toUpperCase());\n        }\n        this.easing = config.easing || EASING_DEFAULT;\n        if (config.snapDestinationX && typeof config.snapDestinationX !== 'string') {\n            throw new Error(\"Optional config property 'snapDestinationX' is not valid, expected STRING but found \" + (typeof config.easing).toUpperCase());\n        }\n        this.snapDestinationX = config.snapDestinationX;\n        if (config.snapDestinationY && typeof config.snapDestinationY !== 'string') {\n            throw new Error(\"Optional config property 'snapDestinationY' is not valid, expected STRING but found \" + (typeof config.easing).toUpperCase());\n        }\n        this.snapDestinationY = config.snapDestinationY;\n    }\n    ScrollSnap.prototype.checkScrollSpeed = function (value, axis) {\n        var _this = this;\n        var clear = function () {\n            _this.lastScrollValue[axis] = null;\n        };\n        var newValue = value;\n        var delta;\n        if (this.lastScrollValue[axis] !== null) {\n            delta = newValue - this.lastScrollValue[axis];\n        }\n        else {\n            delta = 0;\n        }\n        this.lastScrollValue[axis] = newValue;\n        this.scrollSpeedTimer && clearTimeout(this.scrollSpeedTimer);\n        this.scrollSpeedTimer = window.setTimeout(clear, 100);\n        return delta;\n    };\n    ScrollSnap.prototype.saveDeclaration = function (obj) {\n        this.snapLengthUnit = this.parseSnapCoordValue(this.snapDestinationX, this.snapDestinationY);\n    };\n    ScrollSnap.prototype.bindElement = function (element) {\n        this.target = element;\n        this.listenerElement = element === document.documentElement ? window : element;\n        this.listenerElement.addEventListener('scroll', this.startAnimation, false);\n        this.saveDeclaration(this.target);\n    };\n    ScrollSnap.prototype.unbindElement = function () {\n        this.listenerElement.removeEventListener('scroll', this.startAnimation, false);\n    };\n    /**\n     * scroll handler\n     * this is the callback for scroll events.\n     */\n    ScrollSnap.prototype.handler = function (target) {\n        // if currently this.animating, stop it. this prevents flickering.\n        if (this.animationFrame) {\n            clearTimeout(this.animationFrame);\n        }\n        // if a previous timeout exists, clear it.\n        if (this.scrollHandlerTimer) {\n            // we only want to call a timeout once after scrolling..\n            clearTimeout(this.scrollHandlerTimer);\n        }\n        else {\n            this.scrollStart = {\n                y: target.scrollTop,\n                x: target.scrollLeft,\n            };\n        }\n        this.scrollHandlerTimer = window.setTimeout(this.animationHandler, this.timeout);\n    };\n    ScrollSnap.prototype.getNextSnapPoint = function (target, direction) {\n        // get snap length\n        var snapLength = {\n            y: Math.round(this.getYSnapLength(this.target, this.snapLengthUnit.y)),\n            x: Math.round(this.getXSnapLength(this.target, this.snapLengthUnit.x)),\n        };\n        var top = this.target.scrollTop;\n        var left = this.target.scrollLeft;\n        // calc current and initial snappoint\n        var currentPoint = {\n            y: top / snapLength.y || 1,\n            x: left / snapLength.x || 1,\n        };\n        var nextPoint = {\n            y: 0,\n            x: 0,\n        };\n        // set target and bounds by direction\n        nextPoint.y = this.roundByDirection(direction.y, currentPoint.y);\n        nextPoint.x = this.roundByDirection(direction.x, currentPoint.x);\n        // calculate where to scroll\n        var scrollTo = {\n            y: nextPoint.y * snapLength.y,\n            x: nextPoint.x * snapLength.x,\n        };\n        // stay in bounds (minimum: 0, maxmimum: absolute height)\n        scrollTo.y = this.stayInBounds(0, target.scrollHeight, scrollTo.y);\n        scrollTo.x = this.stayInBounds(0, target.scrollWidth, scrollTo.x);\n        return scrollTo;\n    };\n    ScrollSnap.prototype.roundByDirection = function (direction, currentPoint) {\n        if (direction === -1) {\n            // when we go up, we floor the number to jump to the next snap-point in scroll direction\n            return Math.floor(currentPoint);\n        }\n        // go down, we ceil the number to jump to the next in view.\n        return Math.ceil(currentPoint);\n    };\n    ScrollSnap.prototype.stayInBounds = function (min, max, destined) {\n        return Math.max(Math.min(destined, max), min);\n    };\n    ScrollSnap.prototype.parseSnapCoordValue = function (x, y) {\n        // regex to parse lengths\n        var regex = /(\\d+)(px|%|vw|vh)/;\n        // defaults\n        var parsed = {\n            y: {\n                value: 0,\n                unit: 'px',\n            },\n            x: {\n                value: 0,\n                unit: 'px',\n            },\n        };\n        // parse value and unit\n        var resultX = regex.exec(x);\n        var resultY = regex.exec(y);\n        // if regexp fails, value is null\n        if (resultX !== null) {\n            parsed.x = {\n                value: Number(resultX[1]),\n                unit: resultX[2],\n            };\n        }\n        if (resultY !== null) {\n            parsed.y = {\n                value: Number(resultY[1]),\n                unit: resultY[2],\n            };\n        }\n        return parsed;\n    };\n    ScrollSnap.prototype.getYSnapLength = function (obj, declaration) {\n        if (declaration.unit === 'vh') {\n            // when using vh, one snap is the length of vh / 100 * value\n            return ((Math.max(document.documentElement.clientHeight, window.innerHeight || 1) / 100) *\n                declaration.value);\n        }\n        else if (declaration.unit === '%') {\n            // when using %, one snap is the length of element height / 100 * value\n            return (obj.clientHeight / 100) * declaration.value;\n        }\n        else {\n            // when using px, one snap is the length of element height / value\n            return obj.clientHeight / declaration.value;\n        }\n    };\n    ScrollSnap.prototype.getXSnapLength = function (obj, declaration) {\n        if (declaration.unit === 'vw') {\n            // when using vw, one snap is the length of vw / 100 * value\n            return ((Math.max(document.documentElement.clientWidth, window.innerWidth || 1) / 100) *\n                declaration.value);\n        }\n        else if (declaration.unit === '%') {\n            // when using %, one snap is the length of element width / 100 * value\n            return (obj.clientWidth / 100) * declaration.value;\n        }\n        else {\n            // when using px, one snap is the length of element width / value\n            return obj.clientWidth / declaration.value;\n        }\n    };\n    ScrollSnap.prototype.isEdge = function (coords) {\n        return (coords.x === 0 && this.speedDeltaY === 0) || (coords.y === 0 && this.speedDeltaX === 0);\n    };\n    ScrollSnap.prototype.smoothScroll = function (obj, end, callback) {\n        var _this = this;\n        var position = function (start, end, elapsed, duration) {\n            if (elapsed > duration) {\n                return end;\n            }\n            return start + (end - start) * _this.easing(elapsed / duration);\n        };\n        var start = {\n            y: obj.scrollTop,\n            x: obj.scrollLeft,\n        };\n        // get animation frame or a fallback\n        var requestAnimationFrame = window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            function (fn) {\n                return window.setTimeout(fn, 15);\n            };\n        var duration = this.isEdge(start) ? 0 : this.duration;\n        var startTime;\n        // setup the stepping function\n        function step(timestamp) {\n            if (!startTime) {\n                startTime = timestamp;\n            }\n            var elapsed = timestamp - startTime;\n            // change position on y-axis if result is a number.\n            if (!isNaN(end.y)) {\n                obj.scrollTop = position(start.y, end.y, elapsed, duration);\n            }\n            // change position on x-axis if result is a number.\n            if (!isNaN(end.x)) {\n                obj.scrollLeft = position(start.x, end.x, elapsed, duration);\n            }\n            // check if we are over due;\n            if (elapsed < duration) {\n                requestAnimationFrame(step);\n            }\n            else {\n                // is there a callback?\n                if (typeof callback === 'function') {\n                    // stop execution and run the callback\n                    return callback(end);\n                }\n            }\n        }\n        this.animationFrame = requestAnimationFrame(step);\n    };\n    ScrollSnap.prototype.bind = function (callback) {\n        this.onAnimationEnd = typeof callback === 'function' ? callback : NOOP;\n        this.bindElement(this.element);\n        return this;\n    };\n    ScrollSnap.prototype.unbind = function () {\n        this.unbindElement();\n        return this;\n    };\n    return ScrollSnap;\n}());\nexports.default = ScrollSnap;\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGwtc25hcC8uL3NyYy9pbmRleC50cz9mZmI0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBUyxhQUFhLENBQUMsQ0FBUztJQUM5QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUNuRCxDQUFDO0FBRUQsSUFBTSxlQUFlLEdBQUcsR0FBRztBQUMzQixJQUFNLGdCQUFnQixHQUFHLEdBQUc7QUFDNUIsSUFBTSxjQUFjLEdBQUcsYUFBYTtBQUNwQyxJQUFNLElBQUksR0FBRyxjQUFPLENBQUM7QUF1Q3JCO0lBdUJFLG9CQUFZLE9BQW9CLEVBQUUsTUFBK0I7UUFBakUsaUJBb0NDO1FBbERELGNBQVMsR0FBRyxLQUFLO1FBUVQsb0JBQWUsR0FBVztZQUNoQyxDQUFDLEVBQUUsQ0FBQztZQUNKLENBQUMsRUFBRSxDQUFDO1NBQ0w7UUEyRU8sbUJBQWMsR0FBRztZQUN2QixLQUFJLENBQUMsV0FBVyxHQUFHLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUM7WUFDckUsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDO1lBRXBFLElBQUksS0FBSSxDQUFDLFNBQVMsSUFBSSxDQUFDLEtBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxJQUFJLEtBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxDQUFDLEVBQUU7Z0JBQ3hFLE9BQU07YUFDUDtZQUVELEtBQUksQ0FBQyxPQUFPLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQztRQUMzQixDQUFDO1FBMEJPLHFCQUFnQixHQUFHO1lB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QVEsS0FBSyxVQUFVLEVBQUU7b0JBQ2xDLHNDQUFzQztvQkFDdEMsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDO2lCQUNyQjthQUNGO1FBQ0gsQ0FBQztRQUNELElBQUksQ0FBQyxjQUFjLEdBQUcscUJBQXFCLENBQUMsSUFBSSxDQUFDO0lBQ25ELENBQUM7SUFFRCx5QkFBSSxHQUFKLFVBQUssUUFBcUI7UUFDeEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLFFBQVEsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUN0RSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDOUIsT0FBTyxJQUFJO0lBQ2IsQ0FBQztJQUVELDJCQUFNLEdBQU47UUFDRSxJQUFJLENBQUMsYUFBYSxFQUFFO1FBQ3BCLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFDSCxpQkFBQztBQUFELENBQUMiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGVhc2VJbk91dFF1YWQodDogbnVtYmVyKSB7XG4gIHJldHVybiB0IDwgMC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHRcbn1cblxuY29uc3QgVElNRU9VVF9ERUZBVUxUID0gMTAwXG5jb25zdCBEVVJBVElPTl9ERUZBVUxUID0gMzAwXG5jb25zdCBFQVNJTkdfREVGQVVMVCA9IGVhc2VJbk91dFF1YWRcbmNvbnN0IE5PT1AgPSAoKSA9PiB7fVxuXG5pbnRlcmZhY2UgU2Nyb2xsU25hcENvbmZpZ3VyYXRpb24ge1xuICAvKipcbiAgICogc25hcC1kZXN0aW5hdGlvbiBmb3IgeCBhbmQgeSBheGVzXG4gICAqIHNob3VsZCBiZSBhIHZhbGlkIGNzcyB2YWx1ZSBleHByZXNzZWQgYXMgcHh8JXx2d3x2aFxuICAgKiovXG4gIHNuYXBEZXN0aW5hdGlvblg/OiBzdHJpbmdcbiAgc25hcERlc3RpbmF0aW9uWT86IHN0cmluZ1xuICAvKipcbiAgICogdGltZSBpbiBtcyBhZnRlciB3aGljaCBzY3JvbGxpbmcgaXMgY29uc2lkZXJlZCBmaW5pc2hlZFxuICAgKiovXG4gIHRpbWVvdXQ/OiBudW1iZXJcbiAgLyoqXG4gICAqIGR1cmF0aW9uIGluIG1zIGZvciB0aGUgc21vb3RoIHNuYXBcbiAgICoqL1xuICBkdXJhdGlvbj86IG51bWJlclxuICAvKipcbiAgICogY3VzdG9tIGVhc2luZyBmdW5jdGlvblxuICAgKiBAcGFyYW0gdCBOb3JtYWxpemVkIHRpbWUgdHlwaWNhbGx5IGluIHRoZSByYW5nZSBbMCwgMV1cbiAgICoqL1xuICBlYXNpbmc/OiAodDogbnVtYmVyKSA9PiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFNuYXBMZW5ndGgge1xuICB2YWx1ZTogbnVtYmVyXG4gIHVuaXQ6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU25hcENvb3JkIHtcbiAgeTogU25hcExlbmd0aFxuICB4OiBTbmFwTGVuZ3RoXG59XG5cbmludGVyZmFjZSBDb29yZHMge1xuICB5PzogbnVtYmVyXG4gIHg/OiBudW1iZXJcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Nyb2xsU25hcCB7XG4gIHNuYXBEZXN0aW5hdGlvblg6IFNjcm9sbFNuYXBDb25maWd1cmF0aW9uWydzbmFwRGVzdGluYXRpb25YJ11cbiAgc25hcERlc3RpbmF0aW9uWTogU2Nyb2xsU25hcENvbmZpZ3VyYXRpb25bJ3NuYXBEZXN0aW5hdGlvblknXVxuICB0aW1lb3V0OiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvblsndGltZW91dCddXG4gIGR1cmF0aW9uOiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvblsnZHVyYXRpb24nXVxuICBlYXNpbmc6IFNjcm9sbFNuYXBDb25maWd1cmF0aW9uWydlYXNpbmcnXVxuICBlbGVtZW50OiBIVE1MRWxlbWVudFxuICBsaXN0ZW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgV2luZG93XG4gIHRhcmdldDogSFRNTEVsZW1lbnRcbiAgYW5pbWF0aW5nID0gZmFsc2VcbiAgcHJpdmF0ZSBvbkFuaW1hdGlvbkVuZDogKCkgPT4gdm9pZFxuICBwcml2YXRlIHNjcm9sbEhhbmRsZXJUaW1lcjogbnVtYmVyXG4gIHByaXZhdGUgc2Nyb2xsU3BlZWRUaW1lcjogbnVtYmVyXG4gIHByaXZhdGUgc2Nyb2xsU3RhcnQ6IENvb3Jkc1xuICBwcml2YXRlIHNwZWVkRGVsdGFYOiBudW1iZXJcbiAgcHJpdmF0ZSBzcGVlZERlbHRhWTogbnVtYmVyXG4gIHByaXZhdGUgc25hcExlbmd0aFVuaXQ6IFNuYXBDb29yZFxuICBwcml2YXRlIGxhc3RTY3JvbGxWYWx1ZTogQ29vcmRzID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgfVxuICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lOiBudW1iZXJcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnOiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICBpZiAoY29uZmlnLnRpbWVvdXQgJiYgKGlzTmFOKGNvbmZpZy50aW1lb3V0KSB8fCB0eXBlb2YgY29uZmlnLnRpbWVvdXQgPT09ICdib29sZWFuJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9wdGlvbmFsIGNvbmZpZyBwcm9wZXJ0eSAndGltZW91dCcgaXMgbm90IHZhbGlkLCBleHBlY3RlZCBOVU1CRVIgYnV0IGZvdW5kICR7KHR5cGVvZiBjb25maWcudGltZW91dCkudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMudGltZW91dCA9IGNvbmZpZy50aW1lb3V0IHx8IFRJTUVPVVRfREVGQVVMVFxuXG4gICAgaWYgKGNvbmZpZy5kdXJhdGlvbiAmJiAoaXNOYU4oY29uZmlnLmR1cmF0aW9uKSB8fCB0eXBlb2YgY29uZmlnLmR1cmF0aW9uID09PSAnYm9vbGVhbicpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBPcHRpb25hbCBjb25maWcgcHJvcGVydHkgJ2R1cmF0aW9uJyBpcyBub3QgdmFsaWQsIGV4cGVjdGVkIE5VTUJFUiBidXQgZm91bmQgJHsodHlwZW9mIGNvbmZpZy5kdXJhdGlvbikudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZHVyYXRpb24gPSBjb25maWcuZHVyYXRpb24gfHwgRFVSQVRJT05fREVGQVVMVFxuXG4gICAgaWYgKGNvbmZpZy5lYXNpbmcgJiYgdHlwZW9mIGNvbmZpZy5lYXNpbmcgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9wdGlvbmFsIGNvbmZpZyBwcm9wZXJ0eSAnZWFzaW5nJyBpcyBub3QgdmFsaWQsIGV4cGVjdGVkIEZVTkNUSU9OIGJ1dCBmb3VuZCAkeyh0eXBlb2YgY29uZmlnLmVhc2luZykudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZWFzaW5nID0gY29uZmlnLmVhc2luZyB8fCBFQVNJTkdfREVGQVVMVFxuXG4gICAgaWYgKGNvbmZpZy5zbmFwRGVzdGluYXRpb25YICYmIHR5cGVvZiBjb25maWcuc25hcERlc3RpbmF0aW9uWCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9wdGlvbmFsIGNvbmZpZyBwcm9wZXJ0eSAnc25hcERlc3RpbmF0aW9uWCcgaXMgbm90IHZhbGlkLCBleHBlY3RlZCBTVFJJTkcgYnV0IGZvdW5kICR7KHR5cGVvZiBjb25maWcuZWFzaW5nKS50b1VwcGVyQ2FzZSgpfWBcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5zbmFwRGVzdGluYXRpb25YID0gY29uZmlnLnNuYXBEZXN0aW5hdGlvblhcblxuICAgIGlmIChjb25maWcuc25hcERlc3RpbmF0aW9uWSAmJiB0eXBlb2YgY29uZmlnLnNuYXBEZXN0aW5hdGlvblkgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBPcHRpb25hbCBjb25maWcgcHJvcGVydHkgJ3NuYXBEZXN0aW5hdGlvblknIGlzIG5vdCB2YWxpZCwgZXhwZWN0ZWQgU1RSSU5HIGJ1dCBmb3VuZCAkeyh0eXBlb2YgY29uZmlnLmVhc2luZykudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuc25hcERlc3RpbmF0aW9uWSA9IGNvbmZpZy5zbmFwRGVzdGluYXRpb25ZXG4gIH1cblxuICBwcml2YXRlIGNoZWNrU2Nyb2xsU3BlZWQodmFsdWU6IG51bWJlciwgYXhpczogJ3gnIHwgJ3knKSB7XG4gICAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLmxhc3RTY3JvbGxWYWx1ZVtheGlzXSA9IG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlXG4gICAgbGV0IGRlbHRhXG4gICAgaWYgKHRoaXMubGFzdFNjcm9sbFZhbHVlW2F4aXNdICE9PSBudWxsKSB7XG4gICAgICBkZWx0YSA9IG5ld1ZhbHVlIC0gdGhpcy5sYXN0U2Nyb2xsVmFsdWVbYXhpc11cbiAgICB9IGVsc2Uge1xuICAgICAgZGVsdGEgPSAwXG4gICAgfVxuICAgIHRoaXMubGFzdFNjcm9sbFZhbHVlW2F4aXNdID0gbmV3VmFsdWVcbiAgICB0aGlzLnNjcm9sbFNwZWVkVGltZXIgJiYgY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsU3BlZWRUaW1lcilcbiAgICB0aGlzLnNjcm9sbFNwZWVkVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChjbGVhciwgMTAwKVxuICAgIHJldHVybiBkZWx0YVxuICB9XG5cbiAgcHJpdmF0ZSBzYXZlRGVjbGFyYXRpb24ob2JqOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMuc25hcExlbmd0aFVuaXQgPSB0aGlzLnBhcnNlU25hcENvb3JkVmFsdWUodGhpcy5zbmFwRGVzdGluYXRpb25YLCB0aGlzLnNuYXBEZXN0aW5hdGlvblkpXG4gIH1cblxuICBwcml2YXRlIGJpbmRFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy50YXJnZXQgPSBlbGVtZW50XG4gICAgdGhpcy5saXN0ZW5lckVsZW1lbnQgPSBlbGVtZW50ID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgPyB3aW5kb3cgOiBlbGVtZW50XG5cbiAgICB0aGlzLmxpc3RlbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnN0YXJ0QW5pbWF0aW9uLCBmYWxzZSlcbiAgICB0aGlzLnNhdmVEZWNsYXJhdGlvbih0aGlzLnRhcmdldClcbiAgfVxuXG4gIHByaXZhdGUgdW5iaW5kRWxlbWVudCgpIHtcbiAgICB0aGlzLmxpc3RlbmVyRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnN0YXJ0QW5pbWF0aW9uLCBmYWxzZSlcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRBbmltYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5zcGVlZERlbHRhWCA9IHRoaXMuY2hlY2tTY3JvbGxTcGVlZCh0aGlzLnRhcmdldC5zY3JvbGxMZWZ0LCAneCcpXG4gICAgdGhpcy5zcGVlZERlbHRhWSA9IHRoaXMuY2hlY2tTY3JvbGxTcGVlZCh0aGlzLnRhcmdldC5zY3JvbGxUb3AsICd5JylcblxuICAgIGlmICh0aGlzLmFuaW1hdGluZyB8fCAodGhpcy5zcGVlZERlbHRhWCA9PT0gMCAmJiB0aGlzLnNwZWVkRGVsdGFZID09PSAwKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVyKHRoaXMudGFyZ2V0KVxuICB9XG5cbiAgLyoqXG4gICAqIHNjcm9sbCBoYW5kbGVyXG4gICAqIHRoaXMgaXMgdGhlIGNhbGxiYWNrIGZvciBzY3JvbGwgZXZlbnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVyKHRhcmdldDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBpZiBjdXJyZW50bHkgdGhpcy5hbmltYXRpbmcsIHN0b3AgaXQuIHRoaXMgcHJldmVudHMgZmxpY2tlcmluZy5cbiAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYW5pbWF0aW9uRnJhbWUpXG4gICAgfVxuXG4gICAgLy8gaWYgYSBwcmV2aW91cyB0aW1lb3V0IGV4aXN0cywgY2xlYXIgaXQuXG4gICAgaWYgKHRoaXMuc2Nyb2xsSGFuZGxlclRpbWVyKSB7XG4gICAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gY2FsbCBhIHRpbWVvdXQgb25jZSBhZnRlciBzY3JvbGxpbmcuLlxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsSGFuZGxlclRpbWVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjcm9sbFN0YXJ0ID0ge1xuICAgICAgICB5OiB0YXJnZXQuc2Nyb2xsVG9wLFxuICAgICAgICB4OiB0YXJnZXQuc2Nyb2xsTGVmdCxcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbEhhbmRsZXJUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuYW5pbWF0aW9uSGFuZGxlciwgdGhpcy50aW1lb3V0KVxuICB9XG5cbiAgcHJpdmF0ZSBhbmltYXRpb25IYW5kbGVyID0gKCkgPT4ge1xuICAgIC8vIGlmIHdlIGRvbid0IG1vdmUgYSB0aGluZywgd2UgY2FuIGlnbm9yZSB0aGUgdGltZW91dDogaWYgd2UgZGlkLCB0aGVyZSdkIGJlIGFub3RoZXIgdGltZW91dCBhZGRlZCBmb3IgdGhpcy5zY3JvbGxTdGFydCsxLlxuICAgIGlmIChcbiAgICAgIHRoaXMuc2Nyb2xsU3RhcnQueSA9PT0gdGhpcy50YXJnZXQuc2Nyb2xsVG9wICYmXG4gICAgICB0aGlzLnNjcm9sbFN0YXJ0LnggPT09IHRoaXMudGFyZ2V0LnNjcm9sbExlZnRcbiAgICApIHtcbiAgICAgIC8vIGlnbm9yZSB0aW1lb3V0XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBkZXRlY3QgZGlyZWN0aW9uIG9mIHNjcm9sbC4gbmVnYXRpdmUgaXMgdXAsIHBvc2l0aXZlIGlzIGRvd24uXG4gICAgY29uc3QgZGlyZWN0aW9uID0ge1xuICAgICAgeTogdGhpcy5zcGVlZERlbHRhWSA+IDAgPyAxIDogLTEsXG4gICAgICB4OiB0aGlzLnNwZWVkRGVsdGFYID4gMCA/IDEgOiAtMSxcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIG5leHQgc25hcC1wb2ludCB0byBzbmFwLXRvXG4gICAgY29uc3Qgc25hcFBvaW50ID0gdGhpcy5nZXROZXh0U25hcFBvaW50KHRoaXMudGFyZ2V0LCBkaXJlY3Rpb24pXG5cbiAgICB0aGlzLmxpc3RlbmVyRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnN0YXJ0QW5pbWF0aW9uLCBmYWxzZSlcblxuICAgIHRoaXMuYW5pbWF0aW5nID0gdHJ1ZVxuXG4gICAgLy8gc21vb3RobHkgbW92ZSB0byB0aGUgc25hcCBwb2ludFxuICAgIHRoaXMuc21vb3RoU2Nyb2xsKHRoaXMudGFyZ2V0LCBzbmFwUG9pbnQsICgpID0+IHtcbiAgICAgIC8vIGFmdGVyIG1vdmluZyB0byB0aGUgc25hcCBwb2ludCwgcmViaW5kIHRoZSBzY3JvbGwgZXZlbnQgaGFuZGxlclxuICAgICAgdGhpcy5hbmltYXRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5saXN0ZW5lckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbiwgZmFsc2UpXG4gICAgICB0aGlzLm9uQW5pbWF0aW9uRW5kKClcbiAgICB9KVxuXG4gICAgLy8gd2UganVzdCBqdW1wZWQgdG8gdGhlIHNuYXBQb2ludCwgc28gdGhpcyB3aWxsIGJlIG91ciBuZXh0IHRoaXMuc2Nyb2xsU3RhcnRcbiAgICBpZiAoIWlzTmFOKHNuYXBQb2ludC54KSB8fCAhaXNOYU4oc25hcFBvaW50LnkpKSB7XG4gICAgICB0aGlzLnNjcm9sbFN0YXJ0ID0gc25hcFBvaW50XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXh0U25hcFBvaW50KHRhcmdldDogSFRNTEVsZW1lbnQsIGRpcmVjdGlvbjogQ29vcmRzKSB7XG4gICAgLy8gZ2V0IHNuYXAgbGVuZ3RoXG4gICAgY29uc3Qgc25hcExlbmd0aCA9IHtcbiAgICAgIHk6IE1hdGgucm91bmQodGhpcy5nZXRZU25hcExlbmd0aCh0aGlzLnRhcmdldCwgdGhpcy5zbmFwTGVuZ3RoVW5pdC55KSksXG4gICAgICB4OiBNYXRoLnJvdW5kKHRoaXMuZ2V0WFNuYXBMZW5ndGgodGhpcy50YXJnZXQsIHRoaXMuc25hcExlbmd0aFVuaXQueCkpLFxuICAgIH1cbiAgICBjb25zdCB0b3AgPSB0aGlzLnRhcmdldC5zY3JvbGxUb3BcbiAgICBjb25zdCBsZWZ0ID0gdGhpcy50YXJnZXQuc2Nyb2xsTGVmdFxuXG4gICAgLy8gY2FsYyBjdXJyZW50IGFuZCBpbml0aWFsIHNuYXBwb2ludFxuICAgIGNvbnN0IGN1cnJlbnRQb2ludCA9IHtcbiAgICAgIHk6IHRvcCAvIHNuYXBMZW5ndGgueSB8fCAxLFxuICAgICAgeDogbGVmdCAvIHNuYXBMZW5ndGgueCB8fCAxLFxuICAgIH1cbiAgICBjb25zdCBuZXh0UG9pbnQgPSB7XG4gICAgICB5OiAwLFxuICAgICAgeDogMCxcbiAgICB9XG5cbiAgICAvLyBzZXQgdGFyZ2V0IGFuZCBib3VuZHMgYnkgZGlyZWN0aW9uXG4gICAgbmV4dFBvaW50LnkgPSB0aGlzLnJvdW5kQnlEaXJlY3Rpb24oZGlyZWN0aW9uLnksIGN1cnJlbnRQb2ludC55KVxuICAgIG5leHRQb2ludC54ID0gdGhpcy5yb3VuZEJ5RGlyZWN0aW9uKGRpcmVjdGlvbi54LCBjdXJyZW50UG9pbnQueClcblxuICAgIC8vIGNhbGN1bGF0ZSB3aGVyZSB0byBzY3JvbGxcbiAgICBjb25zdCBzY3JvbGxUbyA9IHtcbiAgICAgIHk6IG5leHRQb2ludC55ICogc25hcExlbmd0aC55LFxuICAgICAgeDogbmV4dFBvaW50LnggKiBzbmFwTGVuZ3RoLngsXG4gICAgfVxuXG4gICAgLy8gc3RheSBpbiBib3VuZHMgKG1pbmltdW06IDAsIG1heG1pbXVtOiBhYnNvbHV0ZSBoZWlnaHQpXG4gICAgc2Nyb2xsVG8ueSA9IHRoaXMuc3RheUluQm91bmRzKDAsIHRhcmdldC5zY3JvbGxIZWlnaHQsIHNjcm9sbFRvLnkpXG4gICAgc2Nyb2xsVG8ueCA9IHRoaXMuc3RheUluQm91bmRzKDAsIHRhcmdldC5zY3JvbGxXaWR0aCwgc2Nyb2xsVG8ueClcblxuICAgIHJldHVybiBzY3JvbGxUb1xuICB9XG5cbiAgcHJpdmF0ZSByb3VuZEJ5RGlyZWN0aW9uKGRpcmVjdGlvbjogbnVtYmVyLCBjdXJyZW50UG9pbnQ6IG51bWJlcikge1xuICAgIGlmIChkaXJlY3Rpb24gPT09IC0xKSB7XG4gICAgICAvLyB3aGVuIHdlIGdvIHVwLCB3ZSBmbG9vciB0aGUgbnVtYmVyIHRvIGp1bXAgdG8gdGhlIG5leHQgc25hcC1wb2ludCBpbiBzY3JvbGwgZGlyZWN0aW9uXG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihjdXJyZW50UG9pbnQpXG4gICAgfVxuICAgIC8vIGdvIGRvd24sIHdlIGNlaWwgdGhlIG51bWJlciB0byBqdW1wIHRvIHRoZSBuZXh0IGluIHZpZXcuXG4gICAgcmV0dXJuIE1hdGguY2VpbChjdXJyZW50UG9pbnQpXG4gIH1cblxuICBwcml2YXRlIHN0YXlJbkJvdW5kcyhtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGRlc3RpbmVkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oZGVzdGluZWQsIG1heCksIG1pbilcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTbmFwQ29vcmRWYWx1ZSh4OiBzdHJpbmcsIHk6IHN0cmluZykge1xuICAgIC8vIHJlZ2V4IHRvIHBhcnNlIGxlbmd0aHNcbiAgICBjb25zdCByZWdleCA9IC8oXFxkKykocHh8JXx2d3x2aCkvXG4gICAgLy8gZGVmYXVsdHNcbiAgICBjb25zdCBwYXJzZWQgPSB7XG4gICAgICB5OiB7XG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICB1bml0OiAncHgnLFxuICAgICAgfSxcbiAgICAgIHg6IHtcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgIHVuaXQ6ICdweCcsXG4gICAgICB9LFxuICAgIH1cblxuICAgIC8vIHBhcnNlIHZhbHVlIGFuZCB1bml0XG4gICAgY29uc3QgcmVzdWx0WCA9IHJlZ2V4LmV4ZWMoeClcbiAgICBjb25zdCByZXN1bHRZID0gcmVnZXguZXhlYyh5KVxuXG4gICAgLy8gaWYgcmVnZXhwIGZhaWxzLCB2YWx1ZSBpcyBudWxsXG4gICAgaWYgKHJlc3VsdFggIT09IG51bGwpIHtcbiAgICAgIHBhcnNlZC54ID0ge1xuICAgICAgICB2YWx1ZTogTnVtYmVyKHJlc3VsdFhbMV0pLFxuICAgICAgICB1bml0OiByZXN1bHRYWzJdLFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVzdWx0WSAhPT0gbnVsbCkge1xuICAgICAgcGFyc2VkLnkgPSB7XG4gICAgICAgIHZhbHVlOiBOdW1iZXIocmVzdWx0WVsxXSksXG4gICAgICAgIHVuaXQ6IHJlc3VsdFlbMl0sXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZFxuICB9XG5cbiAgcHJpdmF0ZSBnZXRZU25hcExlbmd0aChvYmo6IEhUTUxFbGVtZW50LCBkZWNsYXJhdGlvbjogU25hcExlbmd0aCkge1xuICAgIGlmIChkZWNsYXJhdGlvbi51bml0ID09PSAndmgnKSB7XG4gICAgICAvLyB3aGVuIHVzaW5nIHZoLCBvbmUgc25hcCBpcyB0aGUgbGVuZ3RoIG9mIHZoIC8gMTAwICogdmFsdWVcbiAgICAgIHJldHVybiAoXG4gICAgICAgIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMSkgLyAxMDApICpcbiAgICAgICAgZGVjbGFyYXRpb24udmFsdWVcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICclJykge1xuICAgICAgLy8gd2hlbiB1c2luZyAlLCBvbmUgc25hcCBpcyB0aGUgbGVuZ3RoIG9mIGVsZW1lbnQgaGVpZ2h0IC8gMTAwICogdmFsdWVcbiAgICAgIHJldHVybiAob2JqLmNsaWVudEhlaWdodCAvIDEwMCkgKiBkZWNsYXJhdGlvbi52YWx1ZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3aGVuIHVzaW5nIHB4LCBvbmUgc25hcCBpcyB0aGUgbGVuZ3RoIG9mIGVsZW1lbnQgaGVpZ2h0IC8gdmFsdWVcbiAgICAgIHJldHVybiBvYmouY2xpZW50SGVpZ2h0IC8gZGVjbGFyYXRpb24udmFsdWVcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFhTbmFwTGVuZ3RoKG9iajogSFRNTEVsZW1lbnQsIGRlY2xhcmF0aW9uOiBTbmFwTGVuZ3RoKSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICd2dycpIHtcbiAgICAgIC8vIHdoZW4gdXNpbmcgdncsIG9uZSBzbmFwIGlzIHRoZSBsZW5ndGggb2YgdncgLyAxMDAgKiB2YWx1ZVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgKE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMSkgLyAxMDApICpcbiAgICAgICAgZGVjbGFyYXRpb24udmFsdWVcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICclJykge1xuICAgICAgLy8gd2hlbiB1c2luZyAlLCBvbmUgc25hcCBpcyB0aGUgbGVuZ3RoIG9mIGVsZW1lbnQgd2lkdGggLyAxMDAgKiB2YWx1ZVxuICAgICAgcmV0dXJuIChvYmouY2xpZW50V2lkdGggLyAxMDApICogZGVjbGFyYXRpb24udmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gd2hlbiB1c2luZyBweCwgb25lIHNuYXAgaXMgdGhlIGxlbmd0aCBvZiBlbGVtZW50IHdpZHRoIC8gdmFsdWVcbiAgICAgIHJldHVybiBvYmouY2xpZW50V2lkdGggLyBkZWNsYXJhdGlvbi52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaXNFZGdlKGNvb3JkczogQ29vcmRzKSB7XG4gICAgcmV0dXJuIChjb29yZHMueCA9PT0gMCAmJiB0aGlzLnNwZWVkRGVsdGFZID09PSAwKSB8fCAoY29vcmRzLnkgPT09IDAgJiYgdGhpcy5zcGVlZERlbHRhWCA9PT0gMClcbiAgfVxuXG4gIHByaXZhdGUgc21vb3RoU2Nyb2xsKG9iajogSFRNTEVsZW1lbnQsIGVuZDogQ29vcmRzLCBjYWxsYmFjazogKC4uLmFyZ3M6IGFueSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHBvc2l0aW9uID0gKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChlbGFwc2VkID4gZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGVuZFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhcnQgKyAoZW5kIC0gc3RhcnQpICogdGhpcy5lYXNpbmcoZWxhcHNlZCAvIGR1cmF0aW9uKVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0ge1xuICAgICAgeTogb2JqLnNjcm9sbFRvcCxcbiAgICAgIHg6IG9iai5zY3JvbGxMZWZ0LFxuICAgIH1cblxuICAgIC8vIGdldCBhbmltYXRpb24gZnJhbWUgb3IgYSBmYWxsYmFja1xuICAgIGNvbnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICBmdW5jdGlvbihmbikge1xuICAgICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZm4sIDE1KVxuICAgICAgfVxuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5pc0VkZ2Uoc3RhcnQpID8gMCA6IHRoaXMuZHVyYXRpb25cbiAgICBsZXQgc3RhcnRUaW1lOiBudW1iZXJcblxuICAgIC8vIHNldHVwIHRoZSBzdGVwcGluZyBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIHN0ZXAodGltZXN0YW1wOiBudW1iZXIpIHtcbiAgICAgIGlmICghc3RhcnRUaW1lKSB7XG4gICAgICAgIHN0YXJ0VGltZSA9IHRpbWVzdGFtcFxuICAgICAgfVxuICAgICAgY29uc3QgZWxhcHNlZCA9IHRpbWVzdGFtcCAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBjaGFuZ2UgcG9zaXRpb24gb24geS1heGlzIGlmIHJlc3VsdCBpcyBhIG51bWJlci5cbiAgICAgIGlmICghaXNOYU4oZW5kLnkpKSB7XG4gICAgICAgIG9iai5zY3JvbGxUb3AgPSBwb3NpdGlvbihzdGFydC55LCBlbmQueSwgZWxhcHNlZCwgZHVyYXRpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIGNoYW5nZSBwb3NpdGlvbiBvbiB4LWF4aXMgaWYgcmVzdWx0IGlzIGEgbnVtYmVyLlxuICAgICAgaWYgKCFpc05hTihlbmQueCkpIHtcbiAgICAgICAgb2JqLnNjcm9sbExlZnQgPSBwb3NpdGlvbihzdGFydC54LCBlbmQueCwgZWxhcHNlZCwgZHVyYXRpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBvdmVyIGR1ZTtcbiAgICAgIGlmIChlbGFwc2VkIDwgZHVyYXRpb24pIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpcyB0aGVyZSBhIGNhbGxiYWNrP1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgLy8gc3RvcCBleGVjdXRpb24gYW5kIHJ1biB0aGUgY2FsbGJhY2tcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZW5kKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcClcbiAgfVxuXG4gIGJpbmQoY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5vbkFuaW1hdGlvbkVuZCA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogTk9PUFxuICAgIHRoaXMuYmluZEVsZW1lbnQodGhpcy5lbGVtZW50KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICB1bmJpbmQoKSB7XG4gICAgdGhpcy51bmJpbmRFbGVtZW50KClcbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")}])}));